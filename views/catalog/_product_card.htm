<div class="product-card">
	<div class="<?= $product->regular_photo ? 'product-card_photo--regular': 'product-card_photo--normal'?>">
		<a href="<?= $product->getUrl() ?>">
			<?php
				$image = $product->findMainPhoto() ? $product->findMainPhoto()->getThumb(320, 320, Phpr_ImageManipulator::fitAndCrop) : '/resources/images/icons/no-image.svg';
			?>
			<img src="<?= $image ?>" alt="<?= $product->name?>" />
		</a>
	</div>

	<div class="product-card_info">

		<div class="product-card_info-description">
			<div class="name">
				<a href="<?= $product->getUrl() ?>"><?= $product->name ?></a>
			</div>

			<div class="short-description"><?= $product->description ?></div>
		</div>

		<div class="product-card_info-buy">

			<?php if($product->price): ?>
				<div class="price">
					<?php if($product->old_price): ?>
						<div class="price-old"><?= Phpr::$lang->num($product->old_price) ?></div>
					<?php endif ?>

					<?php if($product->price): ?>
						<div class="price-actual"><?= Phpr::$lang->num($product->price) ?></div>
					<?php endif ?>
				</div>

				<?= Phpr_Form::openTag(array("action" => u("shop_cart", []), "id" => "form-{$product->id}")) ?>
					<?php 
						$viewData = [
							'withQuantity' => true,
							'initialQuantity' => 1,
							'item' => $product,
							'type' => 'product',
							'idPrefix' => "atc-product-{$product->id}"
						];
					?>

					<?php $this->renderPartial($this->getViewsDir() . "/shop/_add_to_cart.htm", $viewData);?>
				<? Phpr_Form::closeTag(); ?>
			<?php endif; ?>

			<!-- <div class="btn-buy"></div> -->
				<!-- <a href="" class="to-cart">
					<img src="/resources/images/icons/white-box-close.svg" alt="">
					<span>В коробке</span>
				</a> -->

				<!-- <a href="" class="add-product">
					<img src="/resources/images/icons/white-box.svg" alt="">
					<span>Добавить <br> в коробку</span>
				</a> -->


			
		</div>
	</div>
</div>