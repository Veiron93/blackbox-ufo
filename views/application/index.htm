<!-- prettier-ignore -->

<div class="container">
	<div class="index-top-section">

		<?php if (isset($catalogRootCategories) && count($catalogRootCategories)) : ?>
			<div class="catalog-menu">
				<ul>
					<?php foreach ($catalogRootCategories as $category) : ?>
						<li>
							<a href="/catalog/<?= $category->id ?>/">
								<?php
								if (isset($category->image_id) && isset($category->image_path)) {
									$image = (new LWImageManipulator($category->image_id, $category->image_path))->getPath();
								} else {
									$image = "/resources/images/icons/no-image.svg";
								}
								?>

								<img src="<?= $image ?>" alt="–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ <?= $category->name ?>" />
								<span><?= $category->name ?></span>
							</a>

							<?php if (isset($category->hot_categories) && count($category->hot_categories)) : ?>
								<div class="hot-categories">
									<?php foreach ($category->hot_categories as $hotCategory) : ?>
										<a href="/catalog/<?= $hotCategory->id ?>"><?= $hotCategory->name ?></a>
									<?php endforeach ?>
								</div>
							<?php endif ?>
						</li>
					<?php endforeach; ?>
				</ul>
			</div>
		<?php endif; ?>

		<?php
		$mainSlider = App_Helper::getBanners('main_slider');
		$mainSliderMobile = App_Helper::getBanners('main_slider_mobile');
		?>

		<?php if (isset($mainSlider) && count($mainSlider)) : ?>
			<div class="main-slider swiper">

				<?php if (count($mainSlider) > 1) : ?>
					<div class="button-prev"></div>
					<div class="button-next"></div>
				<?php endif; ?>

				<div class="swiper-wrapper">
					<?php foreach ($mainSlider as $banner) : ?>

						<?php $imgBanner = $banner->image->getPath(); ?>

						<?php if ($imgBanner) : ?>
							<div class="swiper-slide" style="background-image:url(<?= $imgBanner ?>)" title="<?= $banner->name ?>">
								<?php if ($banner->link_type !== 'no_link') : ?>
									<a href="<?= ($banner->link_type == 'page') ? $banner->page_code : $banner->link ?>" <?= $banner->open_in_new_window ? ' target="_blank"' : "" ?>></a>
								<?php endif; ?>
							</div>
						<?php endif; ?>
					<?php endforeach; ?>
				</div>
			</div>
		<?php endif; ?>

		<?php if (isset($mainSliderMobile) && count($mainSliderMobile)) : ?>
			<div class="main-slider-mobile swiper">
				<div class="swiper-wrapper">
					<?php foreach ($mainSliderMobile as $bannerMobile) : ?>

						<?php $imgBanner = $bannerMobile->image->getPath(); ?>

						<?php if ($imgBanner) : ?>
							<div class="swiper-slide" style="background-image:url(<?= $imgBanner ?>)" title="<?= $bannerMobile->name ?>">
								<?php if ($bannerMobile->link_type !== 'no_link') : ?>
									<a href="<?= ($bannerMobile->link_type == 'page') ? $bannerMobile->page_code : $bannerMobile->link ?>" <?= $bannerMobile->open_in_new_window ? ' target="_blank"' : "" ?>></a>
								<?php endif; ?>
							</div>
						<?php endif; ?>
					<?php endforeach; ?>
				</div>
			</div>

			<div class="main-slider-mobile-pagination"></div>
		<?php endif; ?>
	</div>


	<div class="index-navigation">


		<!-- <div class="item">
			<a href="/catalog/">
				<img src="/resources/images/icons/index-navigation/more.svg" alt="–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
				<span>–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
			</a>
		</div> -->

		<!-- <div class="item">
			<a href="/catalog/all-products/">
				<img src="/resources/images/icons/index-navigation/devices.svg" alt="–í—Å–µ —Ç–æ–≤–∞—Ä—ã">
				<span>–í—Å–µ —Ç–æ–≤–∞—Ä—ã</span>
			</a>
		</div> -->

		<div class="item">
			<a href="https://t.me/blackbox65/" rel="nofollow" target="_blank">
				<img src="/resources/images/icons/social/telegram-white.svg" alt="–°–∫–∏–¥–∫–∞ –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ Telegram">

				<div class="text">
					<div class="title">–°–∫–∏–¥–∫–∞ 5% –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ Telegram</div>
					<div class="description">–ù–æ–≤–∏–Ω–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤, —Ä–æ–∑—ã–≥—Ä—ã—à–∏, —Å–∫–∏–¥–∫–∏</div>
				</div>
			</a>
		</div>

		<?php if ($countProductsDiscount) : ?>
			<div class="item">
				<a href="/sale/">
					<img src="/resources/images/icons/index-navigation/discount.svg" alt="—Ç–æ–≤–∞—Ä—ã —Å–æ —Å–∫–∏–¥–∫–æ–π">

					<div class="text">
						<div class="title"><?= $countProductsDiscount; ?> <?= Core_String::word_form($countProductsDiscount, ["—Ç–æ–≤–∞—Ä", "—Ç–æ–≤–∞—Ä–∞", "—Ç–æ–≤–∞—Ä–æ–≤"]) ?> —Å–æ —Å–∫–∏–¥–∫–æ–π</div>
						<div class="description">–£—Å–ø–µ–π –∫—É–ø–∏—Ç—å –ø–æ –≤—ã–≥–æ–¥–Ω–æ–π —Ü–µ–Ω–µ</div>
					</div>
				</a>
			</div>
		<?php endif; ?>

		<!-- <div class="item">
			<a href="/cashback100/">
				<img src="/resources/images/icons/index-navigation/smartphone.svg" alt="–¢–µ—Ö–Ω–∏–∫–∞ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é">
				<span>–¢–µ—Ö–Ω–∏–∫–∞ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é</span>
			</a>
		</div> -->



		<div class="item">
			<a href="/cashback100/">
				<img src="/resources/images/icons/index-navigation/money.svg" alt="–ö–µ—à–±—ç–∫ –∑–∞ –æ—Ç–∑—ã–≤">

				<div class="text">
					<div class="title">–ö–µ—à–±—ç–∫ –∑–∞ –æ—Ç–∑—ã–≤</div>
					<div class="description">–û—Ü–µ–Ω–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–∞</div>
				</div>
			</a>
		</div>
	</div>


	<?php

	$pathBlocks = $this->getViewsDir() . "/catalog/blocks/";

	$blocks = [
		[
			'show' => true,
			'name' => 'product_slider',
			'products' => $productNew ?? [],
			'params' => [
				'title' => '–ù–æ–≤–∏–Ω–∫–∏',
				'view_type' => 'list'
			]
		],
		[
			'show' => true,
			'name' => 'product_grid',
			'products' => $usededProducts ?? [],
			'params' => [
				'title' => '–ë/–£ —Ç–æ–≤–∞—Ä—ã',
				'view_type' => 'list'
			]
		],
		[
			'show' => true,
			'name' => 'product_grid',
			'products' => $productSale ?? [],
			'params' => [
				'title' => '–°–∫–∏–¥–∫–∏',
				'link' => '/sale/'
			]
		],
		[
			'show' => true,
			'name' => 'product_grid',
			'products' => $productBestsellers ?? [],
			'params' => [
				'title' => '–¢–æ–ø –ø—Ä–æ–¥–∞–∂ üî•',
				'view_type' => 'list'
			]
		],

		[
			'show' => true,
			'name' => '_infinity_products_list',
			'products' => $infinitiListProducts ?? [],
			'params' => [
				'title' => '–ò –µ—â—ë –Ω–µ–º–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤',
				'view_type' => 'list'
			]
		],
	];

	foreach ($blocks as $block) {
		if ($block['show']) {
			$this->renderPartial($pathBlocks . $block['name'] . ".htm", array_merge(['products' => $block['products']], $block['params']));
		}
	}
	?>
</div>