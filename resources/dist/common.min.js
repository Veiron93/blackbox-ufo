"use strict";function getCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function setCookie(e,t,a={}){(a={path:"/",...a}).expires instanceof Date&&(a.expires=a.expires.toUTCString());let r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var i in a){r+="; "+i;i=a[i];!0!==i&&(r+="="+i)}document.cookie=r}function deleteCookie(e){setCookie(e,"",{"max-age":-1})}function endingWord(e,t){return e[4<t%100&&t%100<20?2:[2,0,1,1,1,2][t%10<5?Math.abs(t)%10:5]]}document.addEventListener("DOMContentLoaded",function(){new Swiper(".main-slider",{loop:!0,effect:"fade",autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:".main-slider .button-next",prevEl:".main-slider .button-prev"}}),new Swiper(".main-slider-mobile",{loop:!0,effect:"fade",autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:document.querySelector(".main-slider-mobile-pagination")}});{function a(){0<window.pageYOffset&&window.scrollBy(0,-window.pageYOffset)}window.addEventListener("scroll",function(){var e=window.pageYOffset;document.documentElement.clientHeight<e?t.forEach(e=>e.classList.add("active")):t.forEach(e=>e.classList.remove("active"))});let t=document.querySelectorAll(".btn-up-page");t.forEach(e=>e.addEventListener("click",a))}function e(e,a){e.forEach(e=>{var t=e.querySelector(".navigation");a.navigation.prevEl=t.querySelector(".btn-prev"),a.navigation.nextEl=t.querySelector(".btn-next"),new Swiper(e,a)})}o={autoplay:{delay:2500,disableOnInteraction:!1},navigation:{nextEl:null,prevEl:null},loop:!0},d=document.querySelectorAll(".block-product-slider__grid"),l=document.querySelectorAll(".block-product-slider__list"),d&&((s=o).breakpoints={0:{slidesPerView:2.2,spaceBetween:10},768:{slidesPerView:4,spaceBetween:20},991:{slidesPerView:5,spaceBetween:20},1200:{slidesPerView:6,spaceBetween:20}},e(d,s)),l&&((d=o).breakpoints={0:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:20},991:{slidesPerView:3,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:20}},e(l,d));{function r(){document.body.classList.toggle("no-scroll"),e.classList.toggle("active"),n()}function i(){(t=this.nextElementSibling)&&(t.classList.add("active"),t.querySelectorAll(".category-level-2").forEach(e=>{e.addEventListener("click",c)}))}function c(){a.push(this),a&&this.classList.toggle("active")}function n(){t&&(t.classList.remove("active"),t=null),a&&(a.forEach(e=>{e.classList.remove("active")}),a.length=0)}var s=document.querySelectorAll(".btn-catalog-menu-mobile");let e=document.querySelector(".mobile-menu-catalog");var o=e.querySelectorAll(".main-category_wrapper");let t=null,a=[];var l=e.querySelectorAll(".link-back");s.forEach(e=>{e.addEventListener("click",r)}),o.forEach(e=>{e.addEventListener("click",i)}),l.forEach(e=>{e.addEventListener("click",n)})}{let e=document.querySelector("header").querySelector("nav"),t=document.querySelector(".btn-mobile-nav");t.addEventListener("click",function(){document.body.classList.toggle("no-scroll"),e.classList.toggle("active"),t.classList.toggle("active")})}var d=document.querySelector(".catalog-products-sorting .view-mode");if(d){getCookie("viewModeProductsList")||setCookie("viewModeProductsList","grid");let t=d.querySelectorAll(".item"),a=getCookie("viewModeProductsList");t.forEach(function(e){e.addEventListener("click",function(){a="grid"==this.getAttribute("data-type")||"list"==this.getAttribute("data-type")?this.getAttribute("data-type"):"grid",document.querySelector(".wrapper-products--default").setAttribute("data-view-list",a),setCookie("viewModeProductsList",a),t.forEach(function(e){e.classList.remove("active")}),e.classList.add("active")})})}function u(){var e="product"==location.pathname.split("/")[2]?"product":"catalog",t=document.querySelectorAll(".btn-add-cart");let i=[],c=("product"==e?(e=document.querySelector(".catalog-product"),i.push(e)):i=document.querySelectorAll(".product-card"),{headers:{"UFO-AJAX-HANDLER":"ev{onAddToCart}","UFO-REQUEST":1}}),n=document.getElementById("mini-cart"),s=document.getElementById("mini-cart-mobile");t&&i&&t.forEach(e=>{e.addEventListener("click",function(){let a=this.getAttribute("data-id"),e=this.getAttribute("data-type"),t=this.getAttribute("data-quantity"),r=this.getAttribute("data-id-sku");axios.post("/shop/",{id:a,type:e,quantity:t,id_sku:r},c).then(e=>{var t=e.data.response["#mini-cart"],e=e.data.response["#mini-cart-mobile"];t&&e&&(n.innerHTML=t,s.innerHTML=e,i.forEach(e=>{e.getAttribute("data-id")==a&&e.classList.add("added")}))})})})}u();o=document.querySelector(".infinity-products-list");if(o){l=o.querySelector(".btn-more-products");let a=o.querySelector(".wrapper-products"),e={headers:{"UFO-AJAX-HANDLER":"ev{onGetRandomProducts}","UFO-REQUEST":1}};o=a.querySelectorAll(".product-card");let r=[];o&&o.forEach(e=>r.push(e.getAttribute("data-id"))),l.addEventListener("click",()=>{axios.post("/",{ids:r},e).then(e=>{var t;e.data.response&&(t=e.data.response.newProductsIds,e=e.data.response.newProducts,a.insertAdjacentHTML("beforeend",e),t.forEach(e=>r.push(e)),u())})})}}),document.addEventListener("DOMContentLoaded",function(){let r="search-history",e=document.querySelector(".widget-search"),t=e.querySelector(".search-input"),a=e.querySelectorAll(".btn-search"),i=e.querySelector(".widget-search-results"),c=i.querySelector(".widget-search-results_categories"),n=c.querySelector(".widget-search-results_categories-list"),s=i.querySelector(".widget-search-results_products"),o=s.querySelector(".widget-search-results_products-list"),l=i.querySelector(".widget-search-results_history"),d=l.querySelector(".widget-search-results_history-list"),u=i.querySelector(".widget-search-results_all"),v=u.querySelector(".all-results_categories"),p=u.querySelector(".all-results_products");function g(){let e=t.value;return e=e.replaceAll(/<[^>]+>/gi,"")}let h=e.querySelector(".btn-clear"),m=!1;function f(){u.classList.remove("active"),v.classList.remove("active"),p.classList.remove("active"),v.querySelector("span").textContent="",p.querySelector("span").textContent=""}function y(){t.value="",c.classList.contains("active")&&(c.classList.remove("active"),n.innerHTML=""),s.classList.contains("active")&&(s.classList.remove("active"),o.innerHTML=""),f(),E(),L()}function L(){m=!m,h.classList.toggle("active")}function w(){axios.post("/search/widget/",{query:g()}).then(e=>{e=e.data.response;if(e&&e.categories.length){var i=e.categories;let t="",a=["товар","товара","товаров"],r=0;i.forEach(e=>{0<e.products_count&&(t+=`<div data-href='/catalog/${e.id}'><span data-level="${e.level}">${e.name}</span> <span data-level="${e.parent_level}">${e.parent_name}</span> <span>${e.products_count} ${endingWord(a,14)}</span></div>`),++r==i.length&&t.length&&(n.innerHTML=t,c.classList.add("active"))})}else n.innerHTML="",c.classList.remove("active");if(e&&e.products.length){var r=e.products;let t="",a=0;r.forEach(e=>{t+=`<div data-href='/catalog/product/${e.id}'><img src="${e.image}"><span>${e.name}</span></div>`,++a==r.length&&t.length&&(o.innerHTML=t,s.classList.add("active"))})}else o.innerHTML="",s.classList.remove("active");f(),e&&(t=e.count_categories,e=e.count_products,t&&(v.querySelector("span").textContent=t,v.classList.add("active")),e&&(p.querySelector("span").textContent=e,p.classList.add("active")),t||e)&&u.classList.add("active"),l.classList.remove("active");var t=n.querySelectorAll("div"),e=o.querySelectorAll("div");(t=[...t,...e]).forEach(t=>{t.addEventListener("click",()=>{var e=t.getAttribute("data-href");b({name:t.querySelector("span").textContent,href:e})})})})}function E(){let t=q(),a="",r=0;t&&t.length&&t.forEach(e=>{a+=`<div><a href="${e.href}">${e.name}</a></div>`,++r==t.length&&a.length&&(d.innerHTML=a,l.classList.add("active"))})}h.addEventListener("click",()=>y()),E(),t.addEventListener("click",()=>{i.classList.contains("active")||i.classList.add("active")}),window.addEventListener("click",e=>{i.classList.contains("active")&&"widget-search"!=e.target.className&&!e.target.closest(".widget-search")&&i.classList.remove("active")});let S=null;function q(){return JSON.parse(localStorage.getItem(r))}function b(a){var e=q();if(e&&e.length){let t=!0;e.forEach(e=>{e.href==a.href&&(t=!1)}),3==e.length&&e.splice(0,1),t&&localStorage.setItem(r,JSON.stringify([...e,a]))}else localStorage.setItem(r,JSON.stringify([a]));window.location=a.href}var k;t.addEventListener("input",function(){0<this.value.length?(S&&clearTimeout(S),S=setTimeout(w,1e3)):y(),0<this.value.length&&!m&&L()}),t.addEventListener("keypress",function(e){var t;"Enter"===e.key&&(t="/search/?q="+g().replace(" ","+"),b({name:g(),href:t}),e.preventDefault(),a.forEach(e=>e.click()))}),a.forEach(e=>e.addEventListener("click",()=>window.location="/search?q="+g())),l.querySelector(".widget-search-results_history-btn-clear").addEventListener("click",()=>{q()&&(l.classList.remove("active"),localStorage.removeItem(r))}),(k=document.querySelectorAll(".btn-status-search"))&&k.forEach(e=>{e.addEventListener("click",()=>document.body.classList.toggle("search-active"))})});