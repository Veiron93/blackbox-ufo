"use strict";function getCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function setCookie(e,t,i={}){(i={path:"/",...i}).expires instanceof Date&&(i.expires=i.expires.toUTCString());let a=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var r in i){a+="; "+r;r=i[r];!0!==r&&(a+="="+r)}document.cookie=a}function deleteCookie(e){setCookie(e,"",{"max-age":-1})}function endingWord(e,t){return e[4<t%100&&t%100<20?2:[2,0,1,1,1,2][t%10<5?Math.abs(t)%10:5]]}document.addEventListener("DOMContentLoaded",function(){new Swiper(".main-slider",{loop:!0,effect:"fade",autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:".main-slider .button-next",prevEl:".main-slider .button-prev"}}),new Swiper(".main-slider-mobile",{loop:!0,effect:"fade",autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:document.querySelector(".main-slider-mobile-pagination")}});{function i(){0<window.pageYOffset&&window.scrollBy(0,-window.pageYOffset)}window.addEventListener("scroll",function(){var e=window.pageYOffset;document.documentElement.clientHeight<e?t.forEach(e=>e.classList.add("active")):t.forEach(e=>e.classList.remove("active"))});let t=document.querySelectorAll(".btn-up-page");t.forEach(e=>e.addEventListener("click",i))}function e(e,i){e.forEach(e=>{var t=e.querySelector(".navigation");i.navigation.prevEl=t.querySelector(".btn-prev"),i.navigation.nextEl=t.querySelector(".btn-next"),new Swiper(e,i)})}o={autoplay:{delay:2500,disableOnInteraction:!1},navigation:{nextEl:null,prevEl:null},loop:!0},d=document.querySelectorAll(".block-product-slider__grid"),l=document.querySelectorAll(".block-product-slider__list"),d&&((n=o).breakpoints={0:{slidesPerView:2.2,spaceBetween:10},768:{slidesPerView:4,spaceBetween:20},991:{slidesPerView:5,spaceBetween:20},1200:{slidesPerView:6,spaceBetween:20}},e(d,n)),l&&((d=o).breakpoints={0:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:20},991:{slidesPerView:3,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:20}},e(l,d));{function a(){document.body.classList.toggle("no-scroll"),e.classList.toggle("active"),s()}function r(){(t=this.nextElementSibling)&&(t.classList.add("active"),t.querySelectorAll(".category-level-2").forEach(e=>{e.addEventListener("click",c)}))}function c(){i.push(this),i&&this.classList.toggle("active")}function s(){t&&(t.classList.remove("active"),t=null),i&&(i.forEach(e=>{e.classList.remove("active")}),i.length=0)}var n=document.querySelectorAll(".btn-catalog-menu-mobile");let e=document.querySelector(".mobile-menu-catalog");var o=e.querySelectorAll(".main-category_wrapper");let t=null,i=[];var l=e.querySelectorAll(".link-back");n.forEach(e=>{e.addEventListener("click",a)}),o.forEach(e=>{e.addEventListener("click",r)}),l.forEach(e=>{e.addEventListener("click",s)})}{const t=document.querySelector(".mobile-menu"),v=document.querySelector(".btn-mobile-menu");v&&t&&v.addEventListener("click",function(){document.body.classList.toggle("no-scroll"),t.classList.toggle("active"),v.classList.toggle("active")})}var d=document.querySelector(".catalog-products-sorting .view-mode");if(d){getCookie("viewModeProductsList")||setCookie("viewModeProductsList","grid");let t=d.querySelectorAll(".item"),i=getCookie("viewModeProductsList");t.forEach(function(e){e.addEventListener("click",function(){i="grid"==this.getAttribute("data-type")||"list"==this.getAttribute("data-type")?this.getAttribute("data-type"):"grid",document.querySelector(".wrapper-products--default").setAttribute("data-view-list",i),setCookie("viewModeProductsList",i),t.forEach(function(e){e.classList.remove("active")}),e.classList.add("active")})})}function u(){var e="product"==location.pathname.split("/")[2]?"product":"catalog",t=document.querySelectorAll(".btn-add-cart");let r=[],c=("product"==e?(e=document.querySelector(".catalog-product"),r.push(e)):r=document.querySelectorAll(".product-card"),{headers:{"UFO-AJAX-HANDLER":"ev{onAddToCart}","UFO-REQUEST":1}}),s=document.getElementById("mini-cart"),n=document.getElementById("mini-cart-mobile");t&&r&&t.forEach(e=>{e.addEventListener("click",function(){let i=this.getAttribute("data-id"),e=this.getAttribute("data-type"),t=this.getAttribute("data-quantity"),a=this.getAttribute("data-id-sku");axios.post("/shop/",{id:i,type:e,quantity:t,id_sku:a},c).then(e=>{var t=e.data.response["#mini-cart"],e=e.data.response["#mini-cart-mobile"];t&&e&&(s.innerHTML=t,n.innerHTML=e,r.forEach(e=>{e.getAttribute("data-id")==i&&e.classList.add("added")}))})})})}u();o=document.querySelector(".infinity-products-list");if(o){l=o.querySelector(".btn-more-products");let i=o.querySelector(".wrapper-products"),e={headers:{"UFO-AJAX-HANDLER":"ev{onGetRandomProducts}","UFO-REQUEST":1}};o=i.querySelectorAll(".product-card");let a=[];o&&o.forEach(e=>a.push(e.getAttribute("data-id"))),l.addEventListener("click",()=>{axios.post("/",{ids:a},e).then(e=>{var t;e.data.response&&(t=e.data.response.newProductsIds,e=e.data.response.newProducts,i.insertAdjacentHTML("beforeend",e),t.forEach(e=>a.push(e)),u())})})}{const p=document.querySelector(".btn-state-top-section");if(p){const g=document.querySelector(".header-section-top");p.addEventListener("click",()=>{g.classList.toggle("active"),p.classList.toggle("active"),p.setAttribute("title",p.classList.contains("active")?"Скрыть":"Показать больше информации")})}}}),document.addEventListener("DOMContentLoaded",function(){let a="search-history",e=document.querySelector(".widget-search"),t=e.querySelector(".search-input"),i=e.querySelectorAll(".btn-search"),r=e.querySelector(".widget-search-results"),c=r.querySelector(".widget-search-results_categories"),s=c.querySelector(".widget-search-results_categories-list"),n=r.querySelector(".widget-search-results_products"),o=n.querySelector(".widget-search-results_products-list"),l=r.querySelector(".widget-search-results_history"),d=l.querySelector(".widget-search-results_history-list"),u=r.querySelector(".widget-search-results_all"),v=u.querySelector(".all-results_categories"),p=u.querySelector(".all-results_products");function g(){let e=t.value;return e=e.replaceAll(/<[^>]+>/gi,"")}let h=e.querySelector(".btn-clear"),m=!1;function f(){u.classList.remove("active"),v.classList.remove("active"),p.classList.remove("active"),v.querySelector("span").textContent="",p.querySelector("span").textContent=""}function y(){t.value="",c.classList.contains("active")&&(c.classList.remove("active"),s.innerHTML=""),n.classList.contains("active")&&(n.classList.remove("active"),o.innerHTML=""),f(),E(),L()}function L(){m=!m,h.classList.toggle("active")}function w(){axios.post("/search/widget/",{query:g()}).then(e=>{e=e.data.response;if(e&&e.categories.length){var r=e.categories;let t="",i=["товар","товара","товаров"],a=0;r.forEach(e=>{0<e.products_count&&(t+=`<div data-href='/catalog/${e.id}'><span data-level="${e.level}">${e.name}</span> <span data-level="${e.parent_level}">${e.parent_name}</span> <span>${e.products_count} ${endingWord(i,e.products_count)}</span></div>`),++a==r.length&&t.length&&(s.innerHTML=t,c.classList.add("active"))})}else s.innerHTML="",c.classList.remove("active");if(e&&e.products.length){var a=e.products;let t="",i=0;a.forEach(e=>{t+=`<div data-href='/catalog/product/${e.id}'><img src="${e.image}"><span>${e.name}</span></div>`,++i==a.length&&t.length&&(o.innerHTML=t,n.classList.add("active"))})}else o.innerHTML="",n.classList.remove("active");f(),e&&(t=e.count_categories,e=e.count_products,t&&(v.querySelector("span").textContent=t,v.classList.add("active")),e&&(p.querySelector("span").textContent=e,p.classList.add("active")),t||e)&&u.classList.add("active"),l.classList.remove("active");var t=s.querySelectorAll("div"),e=o.querySelectorAll("div");(t=[...t,...e]).forEach(t=>{t.addEventListener("click",()=>{var e=t.getAttribute("data-href");b({name:t.querySelector("span").textContent,href:e})})})})}function E(){let t=q(),i="",a=0;t&&t.length&&t.forEach(e=>{i+=`<div><a href="${e.href}">${e.name}</a></div>`,++a==t.length&&i.length&&(d.innerHTML=i,l.classList.add("active"))})}h.addEventListener("click",()=>y()),E(),t.addEventListener("click",()=>{r.classList.contains("active")||r.classList.add("active")}),window.addEventListener("click",e=>{r.classList.contains("active")&&"widget-search"!=e.target.className&&!e.target.closest(".widget-search")&&r.classList.remove("active")});let S=null;function q(){return JSON.parse(localStorage.getItem(a))}function b(i){var e=q();if(e&&e.length){let t=!0;e.forEach(e=>{e.href==i.href&&(t=!1)}),3==e.length&&e.splice(0,1),t&&localStorage.setItem(a,JSON.stringify([...e,i]))}else localStorage.setItem(a,JSON.stringify([i]));window.location=i.href}var k;t.addEventListener("input",function(){0<this.value.length?(S&&clearTimeout(S),S=setTimeout(w,1e3)):y(),0<this.value.length&&!m&&L()}),t.addEventListener("keypress",function(e){var t;"Enter"===e.key&&(t="/search/?q="+g().replace(" ","+"),b({name:g(),href:t}),e.preventDefault(),i.forEach(e=>e.click()))}),i.forEach(e=>e.addEventListener("click",()=>window.location="/search?q="+g())),l.querySelector(".widget-search-results_history-btn-clear").addEventListener("click",()=>{q()&&(l.classList.remove("active"),localStorage.removeItem(a))}),(k=document.querySelectorAll(".btn-state-search"))&&k.forEach(e=>{e.addEventListener("click",()=>document.body.classList.toggle("search-active"))})});